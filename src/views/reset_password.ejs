<%- include('partials/header', { title: "Reset Password", layout: "auth", showNav: false }) %>
  <div class="page-shell page-shell--center">
    <div class="auth-card">
      <div class="auth-header">
        <div class="brand">
          <div class="brand-logo">T</div>
          <div>
            <div class="brand-text-main">Tashkheesa</div>
            <div class="brand-text-sub"><%= (typeof isAr !== 'undefined' && isAr) ? 'إعادة تعيين كلمة المرور' : 'Reset password' %></div>
          </div>
        </div>

        <div class="lang-switch">
          <a href="/lang/en?next=/reset-password/<%= token %>">EN</a> | <a href="/lang/ar?next=/reset-password/<%= token %>">AR</a>
        </div>
      </div>

    <h2 class="auth-title"><%= (typeof isAr !== 'undefined' && isAr) ? 'إعادة تعيين كلمة المرور' : 'Reset your password' %></h2>

    <% if (error) { %>
      <div class="alert alert-error"><%= error %></div>
    <% } %>
    <% if (success) { %>
      <div class="alert alert-success"><%= success %></div>
    <% } %>

    <form method="post" action="/reset-password/<%= token %>">
      <%- (typeof csrfField === 'function') ? csrfField() : '' %>
      <input type="hidden" name="token" value="<%= token %>" />
      <label class="input-label"><%= (typeof isAr !== 'undefined' && isAr) ? 'كلمة مرور جديدة' : 'New password' %></label>
      <input class="input-field" type="password" name="password" required minlength="8" />

      <label class="input-label"><%= (typeof isAr !== 'undefined' && isAr) ? 'تأكيد كلمة المرور' : 'Confirm password' %></label>
      <input class="input-field" type="password" name="confirm_password" required minlength="8" />

      <div class="auth-actions">
        <button class="btn btn-primary" type="submit"><%= (typeof isAr !== 'undefined' && isAr) ? 'تحديث كلمة المرور' : 'Update password' %></button>
      </div>
    </form>
    <div class="auth-footer">
      <a class="link-muted" href="/login"><%= (typeof isAr !== 'undefined' && isAr) ? 'العودة لتسجيل الدخول' : 'Back to login' %></a>
    </div>
  </div>
</div>

<%- include('partials/footer') %>
