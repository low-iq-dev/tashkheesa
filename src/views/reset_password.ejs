<%- include('partials/header', { title: "Reset Password", layout: "auth", showNav: false, showFooter: false }) %>
  <div class="auth-page">
    <div class="auth-card">
      <div class="auth-header">
        <div class="brand-text">
          <strong>Tashkheesa</strong>
          <span><%= (typeof isAr !== 'undefined' && isAr) ? 'إعادة تعيين كلمة المرور' : 'Reset your password' %></span>
        </div>
        <h1><%= (typeof isAr !== 'undefined' && isAr) ? 'إعادة تعيين كلمة المرور' : 'Reset your password' %></h1>
        <p>
          <%= (typeof isAr !== 'undefined' && isAr) ? 'أدخل كلمة مرور جديدة لحسابك.' : 'Enter a new password for your account.' %>
        </p>
        <p>
          <%= (typeof isAr !== 'undefined' && isAr)
            ? 'يجب أن تكون كلمة المرور 8 أحرف على الأقل.'
            : 'Password must be at least 8 characters.' %>
        </p>
      </div>

      <% if (error) { %>
        <div class="auth-actions">
          <p><%= error %></p>
        </div>
      <% } %>
      <% if (success) { %>
        <div class="auth-actions">
          <p><%= success %></p>
        </div>
      <% } %>

      <form method="post" action="/reset-password/<%= token %>">
        <%- (typeof csrfField === 'function') ? csrfField() : '' %>
        <input type="hidden" name="token" value="<%= token %>" />

        <div class="form-group">
          <label class="form-label"><%= (typeof isAr !== 'undefined' && isAr) ? 'كلمة مرور جديدة' : 'New password' %></label>
          <input class="form-control" type="password" name="password" required minlength="8" autocomplete="new-password" />
        </div>

        <div class="form-group">
          <label class="form-label"><%= (typeof isAr !== 'undefined' && isAr) ? 'تأكيد كلمة المرور' : 'Confirm password' %></label>
          <input class="form-control" type="password" name="confirm_password" required minlength="8" autocomplete="new-password" />
        </div>

        <div class="auth-actions">
          <button class="btn btn-primary btn-full" type="submit"><%= (typeof isAr !== 'undefined' && isAr) ? 'تحديث كلمة المرور' : 'Reset password' %></button>
        </div>
      </form>
      <div class="auth-actions">
        <a href="/login"><%= (typeof isAr !== 'undefined' && isAr) ? 'العودة لتسجيل الدخول' : 'Back to login' %></a>
      </div>
    </div>
  </div>

<%- include('partials/footer', { showFooter: false }) %>
