<%
  var _isAr = (typeof isAr !== 'undefined') ? isAr : false;
  var _activePage = (typeof activePage !== 'undefined') ? activePage : 'dashboard';
  function pActive(page) { return _activePage === page ? 'active' : ''; }
%>
<aside class="portal-sidebar">
  <ul class="portal-nav">
    <li><a href="/dashboard" class="<%= pActive('dashboard') %>"><%= _isAr ? 'لوحة التحكم' : 'Dashboard' %></a></li>
    <li><a href="/portal/patient/orders/new" class="<%= pActive('new_case') %>"><%= _isAr ? 'حالة جديدة' : 'New Case' %></a></li>
    <li><a href="/portal/patient/alerts" class="<%= pActive('alerts') %>"><%= _isAr ? 'التنبيهات' : 'Alerts' %></a></li>
    <li><a href="/portal/patient/appointments" class="<%= pActive('appointments') %>"><%= _isAr ? 'المواعيد' : 'Appointments' %></a></li>
    <li><a href="/portal/messages" class="<%= pActive('messages') %>"><%= _isAr ? 'الرسائل' : 'Messages' %></a></li>
    <li><a href="/portal/patient/prescriptions" class="<%= pActive('prescriptions') %>"><%= _isAr ? 'الوصفات' : 'Prescriptions' %></a></li>
    <li><a href="/portal/patient/records" class="<%= pActive('records') %>"><%= _isAr ? 'السجلات الطبية' : 'Medical Records' %></a></li>
    <li><a href="/portal/patient/referrals" class="<%= pActive('referrals') %>"><%= _isAr ? 'الإحالات' : 'Referrals' %></a></li>
    <li><a href="/portal/patient/reviews" class="<%= pActive('reviews') %>"><%= _isAr ? 'التقييمات' : 'Reviews' %></a></li>
    <li><a href="/patient/profile" class="<%= pActive('profile') %>"><%= _isAr ? 'الملف الشخصي' : 'Profile' %></a></li>
    <li><a href="/logout"><%= _isAr ? 'تسجيل الخروج' : 'Logout' %></a></li>
  </ul>
  <div style="padding:12px;">
    <button class="tour-help-btn" onclick="startPortalTour()">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
      <%= _isAr ? 'جولة تعريفية' : 'Take a Tour' %>
    </button>
  </div>
</aside>
