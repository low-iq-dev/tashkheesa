<!DOCTYPE html>
<html lang="<%= lang %>" dir="<%= dir %>">
<head>
  <meta charset="utf-8" />
  <title>Services – <%= brand %></title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="layout">
    <header>
      <div class="brand">
        <div class="brand-logo">T</div>
        <div>
          <div class="brand-text-main"><%= brand %></div>
          <div class="brand-text-sub">Service Catalog</div>
        </div>
      </div>
      <div class="header-right">
        <a class="pill" href="/superadmin">Dashboard</a>
        <a class="pill" href="/superadmin/doctors">Doctors</a>
        <div class="lang-switch" style="font-weight:700; opacity:.9;">
          <a href="/lang/en?next=/superadmin/services">EN</a> | <a href="/lang/ar?next=/superadmin/services">AR</a>
        </div>
        <%- include('partials/user_menu', { menuUser: user, isAr: (typeof lang !== 'undefined' && lang === 'ar'), profileHref: '/superadmin/profile' }) %>
      </div>
    </header>

    <main>
      <div class="page-shell">
        <div class="page-inner">
          <div class="page-heading" style="justify-content: space-between; align-items:center;">
            <div>
              <h1>Services</h1>
              <p class="subtitle">Manage service catalog, pricing, and payment links.</p>
            </div>
            <a class="btn btn-primary" href="/superadmin/services/new">+ Add service</a>
          </div>

          <div class="card">
            <table>
              <thead>
                <tr>
                  <th>Service</th>
                  <th>Code</th>
                  <th>Specialty</th>
                  <th class="align-right">Base price</th>
                  <th class="align-right">Doctor fee</th>
                  <th>Currency</th>
                  <th>Payment link</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <% (services || []).forEach(function(sv){ %>
                  <tr>
                  <td><%= sv.name %></td>
                  <td><%= sv.code || '—' %></td>
                  <td><%= sv.specialty_name || '—' %></td>
                  <td class="align-right"><%= sv.base_price != null ? (sv.currency || 'EGP') + ' ' + Number(sv.base_price).toLocaleString() : '—' %></td>
                  <td class="align-right"><%= sv.doctor_fee != null ? (sv.currency || 'EGP') + ' ' + Number(sv.doctor_fee).toLocaleString() : '—' %></td>
                  <td><%= sv.currency || 'EGP' %></td>
                    <td>
                      <% if (sv.payment_link) { %>
                        <a href="<%= sv.payment_link %>" target="_blank" rel="noopener">Open</a>
                      <% } else { %>
                        —
                      <% } %>
                    </td>
                    <td>
                      <a class="btn btn-outline btn-small" href="/superadmin/services/<%= sv.id %>/edit">Edit</a>
                    </td>
                  </tr>
                <% }); %>
                <% if (!services || !services.length) { %>
                  <tr><td colspan="8" class="empty">No services defined.</td></tr>
                <% } %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </main>
  </div>
</body>
</html>
