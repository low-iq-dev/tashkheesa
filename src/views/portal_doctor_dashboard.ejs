<!DOCTYPE html>
<% const isAr = (typeof lang !== 'undefined' && lang === 'ar'); %>
<html lang="<%= lang || 'en' %>" dir="<%= isAr ? 'rtl' : 'ltr' %>">
<head>
  <meta charset="utf-8" />
  <title>Doctor Portal ‚Äì <%= brand %></title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="layout">
    <header>
      <div class="brand">
        <div class="brand-logo">T</div>
        <div>
          <div class="brand-text-main"><%= brand %></div>
          <div class="brand-text-sub"><%= isAr ? 'ÿ®Ÿàÿßÿ®ÿ© ÿßŸÑÿ∑ÿ®Ÿäÿ®' : 'Doctor portal' %></div>
        </div>
      </div>
        <div class="header-right">
        <a class="pill" href="/doctor/queue"><%= isAr ? 'ÿ≠ÿßŸÑÿßÿ™Ÿä' : 'My cases' %></a>
        <a class="pill" href="/"><%= isAr ? 'ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©' : 'Home' %></a>
        <div class="pill">
          üë®‚Äç‚öïÔ∏è <span><%= (user && user.name) || 'Doctor' %></span>
        </div>
        <div class="lang-switch">
          <a href="/lang/en">EN</a> | <a href="/lang/ar">AR</a>
        </div>
        <form class="logout-form" method="post" action="/logout">
          <button type="submit"><%= t('nav.logout') %></button>
        </form>
      </div>
    </header>

    <main>
      <div class="page-shell portal-page">
        <div class="page-inner">
          <div class="page-heading">
            <div>
              <h1 class="page-title"><%= isAr ? 'ŸÑŸàÿ≠ÿ© ÿ≠ÿßŸÑÿ© ÿßŸÑÿ∑ÿ®Ÿäÿ®' : 'Doctor portal dashboard' %></h1>
              <p class="page-subtitle"><%= isAr ? 'ÿ™ÿ±ŸÉŸäÿ≤ ŸÅŸàÿ±Ÿä ÿπŸÑŸâ ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ≠ÿ±ÿ¨ÿ© ÿ∂ŸÖŸÜ ŸÖÿ¨ÿßŸÑÿßÿ™ŸÉ.' : 'Immediate clarity on active assignments and urgency.' %></p>
            </div>
            <div class="page-heading-actions">
              <a class="btn btn-outline" href="/doctor/queue"><%= isAr ? 'ÿπŸàÿØÿ© ÿ•ŸÑŸâ ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ™ŸÇŸÑŸäÿØŸäÿ©' : 'Go to legacy queue' %></a>
            </div>
          </div>
          <div class="doctor-profile-placeholder">
            <div class="doctor-profile-placeholder__circle">
              <span><%= (user && user.name ? user.name.trim().charAt(0).toUpperCase() : 'üë®‚Äç‚öïÔ∏è') %></span>
            </div>
            <div>
              <strong><%= (user && user.name) || (isAr ? 'ÿßŸÑÿ∑ÿ®Ÿäÿ®' : 'Doctor') %></strong>
              <p class="muted"><%= isAr ? 'ŸÖÿ≥ÿßÿ≠ÿ© ÿßŸÑÿµŸàÿ±ÿ© ÿßŸÑÿ¥ÿÆÿµŸäÿ© ÿßŸÑŸÖÿ≠ÿ¨Ÿàÿ≤ÿ©' : 'Reserved space for profile photo' %></p>
            </div>
          </div>

          <div class="card notifications-card">
            <div class="card-title"><%= isAr ? 'ÿ™ŸÜÿ®ŸäŸáÿßÿ™ ÿßŸÑÿ∑ÿ®Ÿäÿ®' : 'Alerts' %></div>
            <ul class="notifications-list">
              <% notifications.forEach(function(note) { %>
                <li><%= note %></li>
              <% }); %>
            </ul>
          </div>

          <section class="cases-section">
            <div class="section-heading">
              <h2><%= isAr ? 'ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ¨ÿØŸäÿØÿ© ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑŸÇÿ®ŸàŸÑ' : 'New cases awaiting acceptance' %></h2>
            </div>
            <div class="case-grid">
              <% if (newCases && newCases.length) { %>
                <% newCases.forEach(function(c) { %>
                  <article class="portal-case-card">
                    <div class="portal-case-card__header">
                      <div>
                        <div class="portal-case-card__ref"><%= c.reference %></div>
                        <div class="portal-case-card__meta"><%= c.specialtyLabel %></div>
                      </div>
                      <span class="status-pill"><%= c.statusLabel %></span>
                    </div>
                    <div class="portal-case-card__body">
                      <div class="portal-case-card__line">
                        <span><%= isAr ? 'ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÖÿ™ÿ®ŸÇŸä' : 'Time remaining' %></span>
                        <strong><%= c.slaLabel %></strong>
                      </div>
                      <div class="portal-case-card__line">
                        <span><%= isAr ? 'ÿßŸÑÿ≠ÿßŸÑÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©' : 'Current status' %></span>
                        <span><%= c.statusLabel %></span>
                      </div>
                    </div>
                    <div class="portal-case-card__actions">
                      <a class="btn btn-outline btn-small" href="<%= c.href %>"><%= isAr ? 'ŸÅÿ™ÿ≠ ÿßŸÑÿ≠ÿßŸÑÿ©' : 'Open case' %></a>
                    </div>
                  </article>
                <% }); %>
              <% } else { %>
                <div class="empty-state"><%= isAr ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≠ÿßŸÑÿßÿ™ ÿ¨ÿØŸäÿØÿ© ÿ≠ÿßŸÑŸäÿßŸã.' : 'No new cases at the moment.' %></div>
              <% } %>
            </div>
          </section>

          <section class="cases-section">
            <div class="section-heading">
              <h2><%= isAr ? 'ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©' : 'Cases in review' %></h2>
            </div>
            <div class="case-grid">
              <% if (reviewCases && reviewCases.length) { %>
                <% reviewCases.forEach(function(c) { %>
                  <article class="portal-case-card">
                    <div class="portal-case-card__header">
                      <div>
                        <div class="portal-case-card__ref"><%= c.reference %></div>
                        <div class="portal-case-card__meta"><%= c.specialtyLabel %></div>
                      </div>
                      <span class="status-pill"><%= c.statusLabel %></span>
                    </div>
                    <div class="portal-case-card__body">
                      <div class="portal-case-card__line">
                        <span><%= isAr ? 'ÿßŸÑŸÖŸàÿπÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿä' : 'Review deadline' %></span>
                        <strong><%= c.slaLabel %></strong>
                      </div>
                      <div class="portal-case-card__line">
                        <span><%= isAr ? 'ÿßŸÑÿ≠ÿßŸÑÿ©' : 'Status' %></span>
                        <span><%= c.statusLabel %></span>
                      </div>
                    </div>
                    <div class="portal-case-card__actions">
                      <a class="btn btn-outline btn-small" href="<%= c.href %>"><%= isAr ? 'ŸÅÿ™ÿ≠ ÿßŸÑÿ≠ÿßŸÑÿ©' : 'Open case' %></a>
                    </div>
                  </article>
                <% }); %>
              <% } else { %>
                <div class="empty-state"><%= isAr ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≠ÿßŸÑÿßÿ™ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©.' : 'No cases currently in review.' %></div>
              <% } %>
            </div>
          </section>

          <section class="cases-section">
            <div class="section-heading">
              <h2><%= isAr ? 'ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑŸÖŸÉÿ™ŸÖŸÑÿ©' : 'Completed cases' %></h2>
            </div>
            <div class="case-grid">
              <% if (completedCases && completedCases.length) { %>
                <% completedCases.forEach(function(c) { %>
                  <article class="portal-case-card">
                    <div class="portal-case-card__header">
                      <div>
                        <div class="portal-case-card__ref"><%= c.reference %></div>
                        <div class="portal-case-card__meta"><%= c.specialtyLabel %></div>
                      </div>
                      <span class="status-pill"><%= c.statusLabel %></span>
                    </div>
                    <div class="portal-case-card__body">
                      <div class="portal-case-card__line">
                        <span><%= isAr ? 'ÿ™ŸÖ ÿßŸÑÿ•ÿ™ŸÖÿßŸÖ' : 'Completed' %></span>
                        <strong><%= c.slaLabel %></strong>
                      </div>
                    </div>
                    <div class="portal-case-card__actions">
                      <a class="btn btn-outline btn-small" href="<%= c.href %>"><%= isAr ? 'ÿπÿ±ÿ∂ ÿßŸÑÿ≠ÿßŸÑÿ©' : 'View case' %></a>
                    </div>
                  </article>
                <% }); %>
              <% } else { %>
                <div class="empty-state"><%= isAr ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≠ÿßŸÑÿßÿ™ ŸÖŸÉÿ™ŸÖŸÑÿ©.' : 'No completed cases yet.' %></div>
              <% } %>
            </div>
          </section>
        </div>
      </div>
    </main>
  </div>
</body>
</html>
