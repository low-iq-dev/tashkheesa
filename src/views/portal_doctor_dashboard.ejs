<!DOCTYPE html>
<% const isAr = (typeof lang !== 'undefined' && lang === 'ar'); %>
<html lang="<%= lang || 'en' %>" dir="<%= isAr ? 'rtl' : 'ltr' %>">
<head>
  <meta charset="utf-8" />
  <title>Doctor Portal ‚Äì <%= brand %></title>
  <link rel="stylesheet" href="/styles.css" />
</head>

<body>
  <div class="layout">
    <header>
      <div class="brand">
        <div class="brand-logo">T</div>
        <div>
          <div class="brand-text-main"><%= brand %></div>
          <div class="brand-text-sub"><%= isAr ? 'ÿ®Ÿàÿßÿ®ÿ© ÿßŸÑÿ∑ÿ®Ÿäÿ®' : 'Doctor portal' %></div>
        </div>
      </div>

      <div class="header-right">
        <a class="pill" href="/doctor/queue"><%= isAr ? 'ÿ≠ÿßŸÑÿßÿ™Ÿä' : 'My cases' %></a>
        <a class="pill" href="/"><%= isAr ? 'ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©' : 'Home' %></a>
        <div class="pill">üë®‚Äç‚öïÔ∏è <%= (user && user.name) || 'Doctor' %></div>
        <div class="lang-switch">
          <a href="/lang/en">EN</a> | <a href="/lang/ar">AR</a>
        </div>
        <form class="logout-form" method="post" action="/logout">
          <button type="submit"><%= t('nav.logout') %></button>
        </form>
      </div>
    </header>

    <main>
      <div class="page-shell portal-page">
        <div class="page-inner">

          <!-- PAGE HEADER -->
          <div class="page-heading">
            <div>
              <h1 class="page-title"><%= isAr ? 'ŸÑŸàÿ≠ÿ© ÿßŸÑÿ∑ÿ®Ÿäÿ®' : 'Doctor Dashboard' %></h1>
              <p class="page-subtitle">
                <%= isAr
                  ? 'ŸÜÿ∏ÿ±ÿ© ÿπÿßŸÖÿ© ÿπŸÑŸâ ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑŸÖŸàŸÉŸÑÿ© ÿ•ŸÑŸäŸÉ Ÿàÿ≠ÿßŸÑÿ© ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©'
                  : 'Overview of your assigned cases and review status'
                %>
              </p>
            </div>
            <div class="page-heading-actions">
              <a class="btn btn-outline" href="/doctor/queue">
                <%= isAr ? 'ÿßŸÑÿπŸàÿØÿ© ÿ•ŸÑŸâ ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ™ŸÇŸÑŸäÿØŸäÿ©' : 'Go to legacy queue' %>
              </a>
            </div>
          </div>

          <!-- GUIDANCE -->
          <section class="panel section-primary">
            <h2 class="panel-title"><%= isAr ? 'ŸÖÿß ÿßŸÑŸÖÿ∑ŸÑŸàÿ® ÿßŸÑÿ¢ŸÜ' : 'What to do' %></h2>
            <p class="panel-help">
              <%= isAr
                ? 'ÿ•ÿ±ÿ¥ÿßÿØÿßÿ™ ÿ≥ÿ±Ÿäÿπÿ© ŸÑŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ ÿßŸÑÿ™ÿ±ŸÉŸäÿ≤ Ÿàÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑÿ£ŸàŸÑŸàŸäÿßÿ™.'
                : 'Quick guidance to stay focused and prioritize your work.'
              %>
            </p>

            <ul class="file-list">
              <li>
                <%= isAr
                  ? 'ÿßÿ®ÿØÿ£ ÿ®ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ¨ÿØŸäÿØÿ© ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑŸÇÿ®ŸàŸÑ ‚Äî ÿ±ÿßÿ¨ÿπ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ ŸàÿßŸÇÿ®ŸÑ ÿßŸÑÿ≠ÿßŸÑÿ© ŸÑÿ®ÿØÿ° ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©.'
                  : 'Start with new cases awaiting acceptance ‚Äî review details and accept to begin.'
                %>
              </li>
              <li>
                <%= isAr
                  ? 'ÿ™ÿßÿ®ÿπ ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ© ‚Äî ÿ£ŸÉŸÖŸÑ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ© Ÿàÿ£ÿ±ÿ≥ŸÑ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ŸÇÿ®ŸÑ ÿßŸÑŸÖŸàÿπÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿä.'
                  : 'Continue with cases in review ‚Äî complete and submit before the deadline.'
                %>
              </li>
              <li>
                <%= isAr
                  ? 'ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑŸÖŸÉÿ™ŸÖŸÑÿ© ŸÉŸÖÿ±ÿ¨ÿπ ÿπŸÜÿØ ÿßŸÑÿ≠ÿßÿ¨ÿ©.'
                  : 'Use completed cases for quick reference when needed.'
                %>
              </li>
            </ul>

            <p class="sla-note">
              <%= isAr
                ? 'ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÖÿ™ÿ®ŸÇŸä ŸäÿπŸÉÿ≥ ÿßÿ™ŸÅÿßŸÇŸäÿ© ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿÆÿØŸÖÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ© ŸàŸäÿ≥ÿßÿπÿØŸÉ ÿπŸÑŸâ ÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑÿ£ŸàŸÑŸàŸäÿßÿ™.'
                : 'Time remaining reflects the current SLA and helps prioritize near-deadline cases.'
              %>
            </p>

            <p class="sla-note">
              <%= isAr
                ? 'ÿ¥ÿßÿ±ÿ© ÿßŸÑÿ≠ÿßŸÑÿ© ÿ™Ÿàÿ∂ÿ≠ ÿßŸÑŸÖÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©: ÿ¨ÿØŸäÿØ ‚Üê ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ© ‚Üê ŸÖŸÉÿ™ŸÖŸÑ.'
                : 'Status badges indicate the current stage: New ‚Üí In review ‚Üí Completed.'
              %>
            </p>
          </section>

          <!-- NEW CASES -->
          <section class="panel section-primary">
            <h2 class="panel-title"><%= isAr ? 'ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ¨ÿØŸäÿØÿ© ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑŸÇÿ®ŸàŸÑ' : 'New cases awaiting acceptance' %></h2>
            <p class="panel-help">
              <%= isAr
                ? 'ÿßŸÇÿ®ŸÑ ÿßŸÑÿ≠ÿßŸÑÿ© ŸÑÿ®ÿØÿ° ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©. ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÖÿ™ÿ®ŸÇŸä Ÿäÿ≥ÿßÿπÿØŸÉ ÿπŸÑŸâ ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑÿ£ŸàŸÑŸàŸäÿ©.'
                : 'Accept a case to begin review. Time remaining indicates priority.'
              %>
            </p>

            <div class="case-grid">
              <% if (newCases && newCases.length) { %>
                <% newCases.forEach(function(c) { %>
                  <article class="portal-case-card">
                    <div class="portal-case-card__header">
                      <div>
                        <div class="portal-case-card__ref"><%= c.reference %></div>
                        <div class="portal-case-card__meta"><%= c.specialtyLabel %></div>
                      </div>
                      <span class="status-pill"><%= c.statusLabel %></span>
                    </div>

                    <div class="portal-case-card__body">
                      <div class="portal-case-card__line">
                        <span><%= isAr ? 'ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÖÿ™ÿ®ŸÇŸä' : 'Time remaining' %></span>
                        <strong><%= c.slaLabel %></strong>
                      </div>
                    </div>

                    <div class="portal-case-card__actions">
                      <a class="btn btn-outline btn-small" href="<%= c.href %>">
                        <%= isAr ? 'ŸÅÿ™ÿ≠ ÿßŸÑÿ≠ÿßŸÑÿ©' : 'Open case' %>
                      </a>
                    </div>
                  </article>
                <% }); %>
              <% } else { %>
                <div class="empty-state">
                  <h3><%= isAr ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≠ÿßŸÑÿßÿ™ ÿ¨ÿØŸäÿØÿ©' : 'No new cases' %></h3>
                  <p>
                    <%= isAr
                      ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≠ÿßŸÑÿßÿ™ ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑŸÇÿ®ŸàŸÑ ÿ≠ÿßŸÑŸäÿßŸã.'
                      : 'There are no cases waiting for acceptance at the moment.'
                    %>
                  </p>
                </div>
              <% } %>
            </div>
          </section>

          <!-- IN REVIEW -->
          <section class="panel section-secondary">
            <h2 class="panel-title"><%= isAr ? 'ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©' : 'Cases in review' %></h2>
            <p class="panel-help">
              <%= isAr
                ? 'ÿ£ŸÉŸÖŸÑ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ© Ÿàÿ£ÿ±ÿ≥ŸÑ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ŸÇÿ®ŸÑ ÿßŸÑŸÖŸàÿπÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿä.'
                : 'Complete and submit reviews before the deadline.'
              %>
            </p>

            <div class="case-grid">
              <% if (reviewCases && reviewCases.length) { %>
                <% reviewCases.forEach(function(c) { %>
                  <article class="portal-case-card">
                    <div class="portal-case-card__header">
                      <div>
                        <div class="portal-case-card__ref"><%= c.reference %></div>
                        <div class="portal-case-card__meta"><%= c.specialtyLabel %></div>
                      </div>
                      <span class="status-pill"><%= c.statusLabel %></span>
                    </div>

                    <div class="portal-case-card__body">
                      <div class="portal-case-card__line">
                        <span><%= isAr ? 'ÿßŸÑŸÖŸàÿπÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿä' : 'Review deadline' %></span>
                        <strong><%= c.slaLabel %></strong>
                      </div>
                    </div>

                    <div class="portal-case-card__actions">
                      <a class="btn btn-outline btn-small" href="<%= c.href %>">
                        <%= isAr ? 'ŸÅÿ™ÿ≠ ÿßŸÑÿ≠ÿßŸÑÿ©' : 'Open case' %>
                      </a>
                    </div>
                  </article>
                <% }); %>
              <% } else { %>
                <div class="empty-state">
                  <h3><%= isAr ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≠ÿßŸÑÿßÿ™ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©' : 'No cases in review' %></h3>
                  <p>
                    <%= isAr
                      ? 'ÿ≥ÿ™ÿ∏Ÿáÿ± ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ŸáŸÜÿß ÿ®ÿπÿØ ŸÇÿ®ŸàŸÑŸáÿß.'
                      : 'Accepted cases will appear here until completion.'
                    %>
                  </p>
                </div>
              <% } %>
            </div>
          </section>

          <!-- COMPLETED -->
          <section class="panel section-tertiary">
            <h2 class="panel-title"><%= isAr ? 'ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑŸÖŸÉÿ™ŸÖŸÑÿ©' : 'Completed cases' %></h2>
            <p class="panel-help">
              <%= isAr
                ? 'ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ™Ÿä ÿ™ŸÖ ÿ•ŸÜŸáÿßÿ§Ÿáÿß Ÿàÿ•ÿ±ÿ≥ÿßŸÑŸáÿß ŸÑŸÑÿ±ÿ¨Ÿàÿπ ÿßŸÑÿ≥ÿ±Ÿäÿπ.'
                : 'Previously submitted cases for quick reference.'
              %>
            </p>

            <div class="case-grid">
              <% if (completedCases && completedCases.length) { %>
                <% completedCases.forEach(function(c) { %>
                  <article class="portal-case-card">
                    <div class="portal-case-card__header">
                      <div>
                        <div class="portal-case-card__ref"><%= c.reference %></div>
                        <div class="portal-case-card__meta"><%= c.specialtyLabel %></div>
                      </div>
                      <span class="status-pill"><%= c.statusLabel %></span>
                    </div>

                    <div class="portal-case-card__body">
                      <div class="portal-case-card__line">
                        <span><%= isAr ? 'ÿ™ŸÖ ÿßŸÑÿ•ÿ±ÿ≥ÿßŸÑ' : 'Report submitted' %></span>
                      </div>
                    </div>

                    <div class="portal-case-card__actions">
                      <a class="btn btn-outline btn-small" href="<%= c.href %>">
                        <%= isAr ? 'ÿπÿ±ÿ∂ ÿßŸÑÿ≠ÿßŸÑÿ©' : 'View case' %>
                      </a>
                    </div>
                  </article>
                <% }); %>
              <% } else { %>
                <div class="empty-state">
                  <h3><%= isAr ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≠ÿßŸÑÿßÿ™ ŸÖŸÉÿ™ŸÖŸÑÿ© ÿ®ÿπÿØ' : 'No completed cases yet' %></h3>
                  <p>
                    <%= isAr
                      ? 'ÿ≥ÿ™ÿ∏Ÿáÿ± ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ŸáŸÜÿß ÿ®ÿπÿØ ÿ•ÿ±ÿ≥ÿßŸÑ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ±.'
                      : 'Completed cases will appear here after submission.'
                    %>
                  </p>
                </div>
              <% } %>
            </div>
          </section>

        </div>
      </div>
    </main>
  </div>
</body>
</html>