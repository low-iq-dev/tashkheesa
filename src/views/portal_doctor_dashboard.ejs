<!DOCTYPE html>
<% const isAr = (typeof lang !== 'undefined' && lang === 'ar'); %>
<html lang="<%= lang || 'en' %>" dir="<%= isAr ? 'rtl' : 'ltr' %>">
<head>
  <meta charset="utf-8" />
  <title>Doctor Portal ‚Äì <%= brand %></title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="layout">
    <header>
      <div class="brand">
        <div class="brand-logo">T</div>
        <div>
          <div class="brand-text-main"><%= brand %></div>
          <div class="brand-text-sub"><%= isAr ? 'ÿ®Ÿàÿßÿ®ÿ© ÿßŸÑÿ∑ÿ®Ÿäÿ®' : 'Doctor portal' %></div>
        </div>
      </div>
        <div class="header-right">
        <a class="pill" href="/doctor/queue"><%= isAr ? 'ÿ≠ÿßŸÑÿßÿ™Ÿä' : 'My cases' %></a>
        <a class="pill" href="/"><%= isAr ? 'ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©' : 'Home' %></a>
        <div class="pill">
          üë®‚Äç‚öïÔ∏è <span><%= (user && user.name) || 'Doctor' %></span>
        </div>
        <div class="lang-switch">
          <a href="/lang/en">EN</a> | <a href="/lang/ar">AR</a>
        </div>
        <form class="logout-form" method="post" action="/logout">
          <button type="submit"><%= t('nav.logout') %></button>
        </form>
      </div>
    </header>

    <main>
      <div class="page-shell portal-page">
        <div class="page-inner">
          <div class="page-heading">
            <div>
              <h1 class="page-title"><%= isAr ? 'ŸÑŸàÿ≠ÿ© ÿ≠ÿßŸÑÿ© ÿßŸÑÿ∑ÿ®Ÿäÿ®' : 'Doctor portal dashboard' %></h1>
              <p class="page-subtitle"><%= isAr ? 'ÿ™ÿ±ŸÉŸäÿ≤ ŸÅŸàÿ±Ÿä ÿπŸÑŸâ ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ≠ÿ±ÿ¨ÿ© ÿ∂ŸÖŸÜ ŸÖÿ¨ÿßŸÑÿßÿ™ŸÉ.' : 'Immediate clarity on active assignments and urgency.' %></p>
            </div>
            <div class="page-heading-actions">
              <a class="btn btn-outline" href="/doctor/queue"><%= isAr ? 'ÿπŸàÿØÿ© ÿ•ŸÑŸâ ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ÿßŸÑÿ™ŸÇŸÑŸäÿØŸäÿ©' : 'Go to legacy queue' %></a>
            </div>
          </div>
          <div class="content-stack">
            <div class="card card--accent">
              <div class="card-header">
                <div class="card-title"><%= isAr ? 'ŸÖÿßÿ∞ÿß ÿ™ŸÅÿπŸÑ ÿßŸÑÿ¢ŸÜ' : 'What to do' %></div>
                <span class="badge"><%= isAr ? 'ÿ£ŸàŸÑŸàŸäÿ© ÿ≠ÿ≥ÿ® ÿßŸÑŸàŸÇÿ™' : 'Time-aware' %></span>
              </div>
              <p class="help-text"><%= isAr ? 'ŸÇÿßÿ¶ŸÖÿ© ÿ≥ÿ±Ÿäÿπÿ© ŸÑÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑÿ£ŸàŸÑŸàŸäÿßÿ™ ŸàÿßŸÑÿ™ÿ±ŸÉŸäÿ≤ ÿπŸÑŸâ ÿßŸÑÿ£ŸáŸÖ:' : 'A quick checklist to stay focused and prioritize:' %></p>
              <ul class="file-list">
                <li><%= isAr ? 'ÿßÿ®ÿØÿ£ ÿ®ŸÄ ¬´ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ¨ÿØŸäÿØÿ© ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑŸÇÿ®ŸàŸÑ¬ª: ÿßŸÅÿ™ÿ≠ ÿßŸÑÿ≠ÿßŸÑÿ© Ÿàÿ±ÿßÿ¨ÿπ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ ÿ´ŸÖ ÿßŸÇÿ®ŸÑŸáÿß ŸÑÿ®ÿØÿ° ÿßŸÑÿπŸÖŸÑ.' : 'Start with ‚ÄúNew cases awaiting acceptance‚Äù: open a case, review details, then accept it to begin.' %></li>
                <li><%= isAr ? 'ÿßŸÜÿ™ŸÇŸÑ ÿ•ŸÑŸâ ¬´ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©¬ª: ÿ£ŸÉŸÖŸÑ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ© Ÿàÿ£ÿ±ÿ≥ŸÑ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ŸÇÿ®ŸÑ ÿßŸÑŸÖŸàÿπÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿä.' : 'Move to ‚ÄúCases in review‚Äù: continue your review and submit the report before the deadline.' %></li>
                <li><%= isAr ? 'ÿßÿ≥ÿ™ÿÆÿØŸÖ ¬´ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑŸÖŸÉÿ™ŸÖŸÑÿ©¬ª ŸÉŸÖÿ±ÿ¨ÿπ ÿ≥ÿ±Ÿäÿπ ÿπŸÜÿØ ÿßŸÑÿ≠ÿßÿ¨ÿ©.' : 'Use ‚ÄúCompleted cases‚Äù as a quick reference when needed.' %></li>
              </ul>
              <p class="sla-note"><%= isAr ? 'ŸÖŸÑÿßÿ≠ÿ∏ÿ© ŸÑÿ∑ŸäŸÅÿ©: ¬´ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÖÿ™ÿ®ŸÇŸä/ÿßŸÑŸÖŸàÿπÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿä¬ª ŸäÿπŸÉÿ≥ ÿßÿ™ŸÅÿßŸÇŸäÿ© ŸÖÿ≥ÿ™ŸàŸâ ÿßŸÑÿÆÿØŸÖÿ© (SLA) ŸÑŸÑŸÖÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ© ŸÑŸÖÿ≥ÿßÿπÿØÿ™ŸÉ ÿπŸÑŸâ ÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑÿ£ŸàŸÑŸàŸäÿßÿ™‚Äîÿßÿ®ÿØÿ£ ÿ®ŸÖÿß ŸäŸÇÿ™ÿ±ÿ® ŸÖŸÜ ÿßŸÑÿßŸÜÿ™Ÿáÿßÿ°.' : 'Gentle note: ‚ÄúTime remaining/Review deadline‚Äù reflects the SLA for the current stage to help you prioritize‚Äîstart with cases closest to expiring.' %></p>
              <p class="sla-note"><%= isAr ? 'ÿ™Ÿàÿ∂Ÿäÿ≠ ÿßŸÑÿ≠ÿßŸÑÿ©: ÿ¥ÿßÿ±ÿ© ÿßŸÑÿ≠ÿßŸÑÿ© ÿ™ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ© (ŸÖÿ´ŸÑ: ÿ¨ÿØŸäÿØ ‚Üí ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ© ‚Üí ŸÖŸÉÿ™ŸÖŸÑ).' : 'Status tip: the status badge shows the current stage (e.g., New ‚Üí In review ‚Üí Completed).' %></p>
            </div>
          <div class="doctor-profile-placeholder">
            <div class="doctor-profile-placeholder__circle">
              <span><%= (user && user.name ? user.name.trim().charAt(0).toUpperCase() : 'üë®‚Äç‚öïÔ∏è') %></span>
            </div>
            <div>
              <strong><%= (user && user.name) || (isAr ? 'ÿßŸÑÿ∑ÿ®Ÿäÿ®' : 'Doctor') %></strong>
              <p class="muted"><%= isAr ? 'ŸÖÿ≥ÿßÿ≠ÿ© ÿßŸÑÿµŸàÿ±ÿ© ÿßŸÑÿ¥ÿÆÿµŸäÿ© ÿßŸÑŸÖÿ≠ÿ¨Ÿàÿ≤ÿ©' : 'Reserved space for profile photo' %></p>
            </div>
          </div>

          <div class="card notifications-card">
            <div class="card-title"><%= isAr ? 'ÿ™ŸÜÿ®ŸäŸáÿßÿ™ ÿßŸÑÿ∑ÿ®Ÿäÿ®' : 'Alerts' %></div>
            <p class="help-text"><%= isAr ? 'ÿ™ÿ∏Ÿáÿ± ŸáŸÜÿß ÿßŸÑÿ™ŸÜÿ®ŸäŸáÿßÿ™ ÿßŸÑÿ™Ÿä ÿ™ÿ≠ÿ™ÿßÿ¨ ÿ•ŸÑŸâ ÿßŸÜÿ™ÿ®ÿßŸá ÿ≥ÿ±Ÿäÿπ (ŸÖÿ´ŸÑ ÿ™ÿ≠ÿØŸäÿ´ÿßÿ™ ŸÖŸáŸÖÿ© ÿ£Ÿà ÿ≠ÿßŸÑÿßÿ™ ŸÇÿ±Ÿäÿ®ÿ© ŸÖŸÜ ÿßŸÑŸÖŸàÿπÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿä).' : 'Alerts show items that may need quick attention (like important updates or near-deadline cases).' %></p>
            <ul class="notifications-list">
              <% notifications.forEach(function(note) { %>
                <li><%= note %></li>
              <% }); %>
            </ul>
          </div>

          <section class="cases-section">
            <div class="section-heading">
              <h2><%= isAr ? 'ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ¨ÿØŸäÿØÿ© ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑŸÇÿ®ŸàŸÑ' : 'New cases awaiting acceptance' %></h2>
            </div>
            <p class="help-text"><%= isAr ? 'Ÿáÿ∞Ÿá ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ŸÇÿ®ŸàŸÑŸÉ. ÿßŸÅÿ™ÿ≠ ÿßŸÑÿ≠ÿßŸÑÿ© ŸÑŸÖÿ±ÿßÿ¨ÿπÿ© ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ ÿ´ŸÖ ÿßŸÇÿ®ŸÑŸáÿß ŸÑÿ®ÿØÿ° ÿßŸÑÿπŸÖŸÑ. ÿ¥ÿßÿ±ÿ© ÿßŸÑÿ≠ÿßŸÑÿ© ÿ™ÿπÿ±ÿ∂ ÿßŸÑŸÖÿ±ÿ≠ŸÑÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©ÿå Ÿà¬´ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÖÿ™ÿ®ŸÇŸä¬ª Ÿäÿ≥ÿßÿπÿØŸÉ ÿπŸÑŸâ ÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑÿ£ŸàŸÑŸàŸäÿßÿ™.' : 'These cases are waiting for your acceptance. Open a case to review details, then accept it to start. The status badge shows the current stage, and ‚ÄúTime remaining‚Äù helps you prioritize.' %></p>
            <div class="case-grid">
              <% if (newCases && newCases.length) { %>
                <% newCases.forEach(function(c) { %>
                  <article class="portal-case-card">
                    <div class="portal-case-card__header">
                      <div>
                        <div class="portal-case-card__ref"><%= c.reference %></div>
                        <div class="portal-case-card__meta"><%= c.specialtyLabel %></div>
                      </div>
                      <span class="status-pill"><%= c.statusLabel %></span>
                    </div>
                    <div class="portal-case-card__body">
                      <div class="portal-case-card__line">
                        <span><%= isAr ? 'ÿßŸÑŸàŸÇÿ™ ÿßŸÑŸÖÿ™ÿ®ŸÇŸä' : 'Time remaining' %></span>
                        <strong><%= c.slaLabel %></strong>
                      </div>
                      <div class="portal-case-card__line">
                        <span><%= isAr ? 'ÿßŸÑÿ≠ÿßŸÑÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©' : 'Current status' %></span>
                        <span><%= c.statusLabel %></span>
                      </div>
                    </div>
                    <div class="portal-case-card__actions">
                      <a class="btn btn-outline btn-small" href="<%= c.href %>"><%= isAr ? 'ŸÅÿ™ÿ≠ ÿßŸÑÿ≠ÿßŸÑÿ©' : 'Open case' %></a>
                    </div>
                  </article>
                <% }); %>
              <% } else { %>
                <div class="empty-state">
                  <h2><%= isAr ? 'ÿ£ŸÜÿ™ ÿπŸÑŸâ ÿßÿ∑ŸÑÿßÿπ' : 'All caught up' %></h2>
                  <p><%= isAr ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≠ÿßŸÑÿßÿ™ ÿ¨ÿØŸäÿØÿ© ÿ®ÿßŸÜÿ™ÿ∏ÿßÿ± ÿßŸÑŸÇÿ®ŸàŸÑ ÿ≠ÿßŸÑŸäÿßŸã. ÿ±ÿßÿ¨ÿπ ¬´ÿ≠ÿßŸÑÿßÿ™Ÿä¬ª ŸÑŸÑŸÖŸáÿßŸÖ ÿßŸÑÿ¨ÿßÿ±Ÿäÿ© ÿ£Ÿà ÿπÿØ ŸÑÿßÿ≠ŸÇÿßŸã.' : 'No new cases are waiting for acceptance right now. Check ‚ÄúMy cases‚Äù for ongoing work, or come back soon.' %></p>
                </div>
              <% } %>
            </div>
          </section>

          <section class="cases-section">
            <div class="section-heading">
              <h2><%= isAr ? 'ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©' : 'Cases in review' %></h2>
            </div>
            <p class="help-text"><%= isAr ? 'Ÿáÿ∞Ÿá ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ŸÖÿÆÿµÿµÿ© ŸÑŸÉ ŸàŸÇŸäÿØ ÿßŸÑÿπŸÖŸÑ. ÿ£ŸÉŸÖŸÑ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ© Ÿàÿ£ÿ±ÿ≥ŸÑ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ŸÇÿ®ŸÑ ¬´ÿßŸÑŸÖŸàÿπÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿä¬ª. ÿ•ÿ∞ÿß ŸÉÿßŸÜÿ™ ŸÑÿØŸäŸÉ ÿπÿØÿ© ÿ≠ÿßŸÑÿßÿ™ÿå ÿßÿ®ÿØÿ£ ÿ®ÿßŸÑÿ£ŸÇÿ±ÿ® ŸÑÿßŸÜÿ™Ÿáÿßÿ° ÿßŸÑŸàŸÇÿ™.' : 'These cases are assigned to you and in progress. Complete your review and submit before the ‚ÄúReview deadline‚Äù. If you have multiple cases, start with the closest deadline.' %></p>
            <div class="case-grid">
              <% if (reviewCases && reviewCases.length) { %>
                <% reviewCases.forEach(function(c) { %>
                  <article class="portal-case-card">
                    <div class="portal-case-card__header">
                      <div>
                        <div class="portal-case-card__ref"><%= c.reference %></div>
                        <div class="portal-case-card__meta"><%= c.specialtyLabel %></div>
                      </div>
                      <span class="status-pill"><%= c.statusLabel %></span>
                    </div>
                    <div class="portal-case-card__body">
                      <div class="portal-case-card__line">
                        <span><%= isAr ? 'ÿßŸÑŸÖŸàÿπÿØ ÿßŸÑŸÜŸáÿßÿ¶Ÿä' : 'Review deadline' %></span>
                        <strong><%= c.slaLabel %></strong>
                      </div>
                      <div class="portal-case-card__line">
                        <span><%= isAr ? 'ÿßŸÑÿ≠ÿßŸÑÿ©' : 'Status' %></span>
                        <span><%= c.statusLabel %></span>
                      </div>
                    </div>
                    <div class="portal-case-card__actions">
                      <a class="btn btn-outline btn-small" href="<%= c.href %>"><%= isAr ? 'ŸÅÿ™ÿ≠ ÿßŸÑÿ≠ÿßŸÑÿ©' : 'Open case' %></a>
                    </div>
                  </article>
                <% }); %>
              <% } else { %>
                <div class="empty-state">
                  <h2><%= isAr ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≠ÿßŸÑÿßÿ™ ŸÇŸäÿØ ÿßŸÑŸÖÿ±ÿßÿ¨ÿπÿ©' : 'Nothing in review' %></h2>
                  <p><%= isAr ? 'ÿπŸÜÿØ ŸÇÿ®ŸàŸÑ ÿ≠ÿßŸÑÿ© ÿ¨ÿØŸäÿØÿ© ÿ≥ÿ™ÿ∏Ÿáÿ± ŸáŸÜÿß ÿ≠ÿ™Ÿâ ÿ™ŸÉÿ™ŸÖŸÑ. ÿßÿ≥ÿ™ÿÆÿØŸÖ Ÿáÿ∞Ÿá ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ŸÑŸÖÿ™ÿßÿ®ÿπÿ© ÿßŸÑÿπŸÖŸÑ ÿßŸÑÿ¨ÿßÿ±Ÿä.' : 'Once you accept a new case, it will appear here until it‚Äôs completed. Use this list to continue in-progress work.' %></p>
                </div>
              <% } %>
            </div>
          </section>

          <section class="cases-section">
            <div class="section-heading">
              <h2><%= isAr ? 'ÿßŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑŸÖŸÉÿ™ŸÖŸÑÿ©' : 'Completed cases' %></h2>
            </div>
            <p class="help-text"><%= isAr ? 'ÿ≥ÿ¨ŸÑ ŸÑŸÑÿ≠ÿßŸÑÿßÿ™ ÿßŸÑÿ™Ÿä ÿ™ŸÖ ÿ•ŸÜŸáÿßÿ§Ÿáÿß Ÿàÿ•ÿ±ÿ≥ÿßŸÑŸáÿß. ÿ™ÿ∏Ÿáÿ± ŸáŸÜÿß ŸÑŸÑÿ±ÿ¨Ÿàÿπ ÿßŸÑÿ≥ÿ±Ÿäÿπÿå Ÿàÿ™ÿ≥ÿßÿπÿØ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ•ÿ™ŸÖÿßŸÖ ŸÅŸä ÿßŸÑŸÖÿ™ÿßÿ®ÿπÿ© ÿ∂ŸÖŸÜ SLA.' : 'A history of cases you‚Äôve finished and submitted. Keep this list for quick reference; completion info helps with SLA tracking.' %></p>
            <div class="case-grid">
              <% if (completedCases && completedCases.length) { %>
                <% completedCases.forEach(function(c) { %>
                  <article class="portal-case-card">
                    <div class="portal-case-card__header">
                      <div>
                        <div class="portal-case-card__ref"><%= c.reference %></div>
                        <div class="portal-case-card__meta"><%= c.specialtyLabel %></div>
                      </div>
                      <span class="status-pill"><%= c.statusLabel %></span>
                    </div>
                    <div class="portal-case-card__body">
                      <div class="portal-case-card__line">
                        <span><%= isAr ? 'ÿ™ŸÖ ÿßŸÑÿ•ÿ™ŸÖÿßŸÖ' : 'Completed' %></span>
                        <strong><%= c.slaLabel %></strong>
                      </div>
                    </div>
                    <div class="portal-case-card__actions">
                      <a class="btn btn-outline btn-small" href="<%= c.href %>"><%= isAr ? 'ÿπÿ±ÿ∂ ÿßŸÑÿ≠ÿßŸÑÿ©' : 'View case' %></a>
                    </div>
                  </article>
                <% }); %>
              <% } else { %>
                <div class="empty-state">
                  <h2><%= isAr ? 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ≠ÿßŸÑÿßÿ™ ŸÖŸÉÿ™ŸÖŸÑÿ© ÿ®ÿπÿØ' : 'No completed cases yet' %></h2>
                  <p><%= isAr ? 'ÿπŸÜÿØ ÿ•ŸÜŸáÿßÿ° ÿ≠ÿßŸÑÿ© Ÿàÿ•ÿ±ÿ≥ÿßŸÑŸáÿß ÿ≥ÿ™ÿ∏Ÿáÿ± ŸáŸÜÿß ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã ŸÉŸÖÿ±ÿ¨ÿπ ŸÑÿßÿ≠ŸÇ.' : 'When you finish and submit a case, it will appear here automatically for later reference.' %></p>
                </div>
              <% } %>
            </div>
          </section>
          </div>
        </div>
      </div>
    </main>
  </div>
</body>
</html>
